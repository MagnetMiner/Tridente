<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZORD SPA | CONSOLA T√ÅCTICA RESIZABLE üî±</title>
    <style>
        :root {
            --bg: #0A0B0C;
            --grid: #1A2B3C;
            --green: #00FF41;
            --amber: #FF9F00;
            --red: #FF0000;
            --blue: #00A3FF;
        }

        /* --- ESTRUCTURA GLOBAL FLEX --- */
        body, html {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--green);
            font-family: 'Courier New', Courier, monospace;
            height: 100vh;
            width: 100vw;
            display: flex;
            flex-direction: column; /* Alineaci√≥n vertical: Header - Main - Footer */
            overflow: hidden;
        }

        /* Coordenadas en bordes */
        .coord {
            position: fixed; font-size: 0.65rem; color: var(--blue); z-index: 1000;
            background: rgba(10, 11, 12, 0.9); padding: 2px 8px; border: 1px solid var(--grid);
        }
        .top-c { top: 0; left: 50%; transform: translateX(-50%); }
        .bot-c { bottom: 65px; left: 50%; transform: translateX(-50%); }
        .l-c { top: 50%; left: -25px; transform: translateY(-50%) rotate(-90deg); }
        .r-c { top: 50%; right: -25px; transform: translateY(-50%) rotate(90deg); }

        header {
            flex: 0 0 50px; /* Altura fija */
            border-bottom: 2px solid var(--grid);
            display: flex; align-items: center; padding: 0 20px;
            justify-content: space-between; background: #0d1117;
            box-sizing: border-box;
        }

        /* --- CONTENEDOR DE CUADRANTES CON SCROLL SI ES NECESARIO --- */
        main {
            flex: 1 1 auto; /* Ocupa todo el espacio restante */
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto; /* Altura autom√°tica basada en contenido/resize */
            gap: 10px;
            padding: 10px;
            overflow-y: auto; /* Permite scroll si los marcos crecen mucho */
            box-sizing: border-box;
        }

        @media (max-width: 900px) {
            main { grid-template-columns: 1fr; }
        }

        /* --- CUADRANTES M√ìVILES/RESIZABLES --- */
        .quadrant {
            border: 1px solid var(--grid);
            background: rgba(10, 15, 20, 0.9);
            display: flex;
            flex-direction: column;
            min-height: 250px; /* Altura m√≠nima para no romperse */
            position: relative;
            /* PROPIEDAD CLAVE: Permite estirar verticalmente */
            resize: vertical; 
            overflow: auto;
        }

        .q-title {
            background: var(--grid); color: #FFF; padding: 5px 10px;
            font-size: 0.7rem; text-transform: uppercase;
            position: sticky; top: 0; z-index: 5;
        }

        /* --- MAPA Y CONTENIDO --- */
        #tsd-map {
            flex: 1; background-image: radial-gradient(var(--grid) 1px, transparent 1px);
            background-size: 30px 30px; position: relative; min-height: 200px;
        }

        .iframe-wrapper { flex: 1; position: relative; min-height: 300px; }
        iframe { width: 100%; height: 100%; border: none; filter: hue-rotate(140deg) brightness(0.6); }

        #log-display { padding: 10px; font-size: 0.75rem; color: var(--green); }

        /* --- FOOTER SIEMPRE VISIBLE --- */
        footer {
            flex: 0 0 60px; /* Altura fija al fondo */
            border-top: 2px solid var(--grid);
            background: #0d1117;
            display: flex; align-items: center; justify-content: center;
            gap: 20px; z-index: 20;
        }

        button {
            background: transparent; color: var(--amber); border: 1px solid var(--amber);
            padding: 8px 16px; cursor: pointer; font-weight: bold; font-family: monospace;
            text-transform: uppercase; transition: 0.2s;
        }
        button:hover { background: var(--amber); color: #000; }
        .active-btn { background: var(--green) !important; color: #000 !important; border-color: var(--green) !important; }
        .bypass-btn { color: var(--red); border-color: var(--red); }
        .bypass-btn.active-btn { background: var(--red) !important; color: #fff !important; }

        /* Estilo del "grabber" para redimensionar */
        .quadrant::-webkit-resizer {
            background-color: var(--blue);
            border: 3px solid var(--bg);
        }

        #target { position: absolute; color: var(--red); font-size: 0.7rem; font-weight: bold; }
        #laser { position: absolute; height: 2px; background: var(--red); transform-origin: 0 50%; display: none; }

    </style>
</head>
<body>

    <div class="coord top-c" id="lat-t">LAT: SCANNING</div>
    <div class="coord bot-c" id="lat-b">LAT: SCANNING</div>
    <div class="coord l-c" id="lon-l">LON: SCANNING</div>
    <div class="coord r-c" id="lon-r">LON: SCANNING</div>

    <header>
        <div>ZORD SPA // UNIT TRIDENTE üî±</div>
        <div style="color:var(--blue)">STATUS: <span id="sys-status">STANDBY</span></div>
        <div id="clock">00:00:00</div>
    </header>

    <main>
        <div class="quadrant">
            <div class="q-title">Tactical Situation Display</div>
            <div id="tsd-map">
                <div id="laser"></div>
                <div id="target" style="left: 60%; top: 40%;">
                    <div style="border:1px solid red; width:15px; height:15px; margin-bottom:5px;"></div>
                    TRK-ALPHA
                </div>
            </div>
        </div>

        <div class="quadrant" style="min-height: 400px;">
            <div class="q-title">Hz-Operator Spectral Analysis [DRAG CORNER TO EXTEND]</div>
            <div class="iframe-wrapper">
                <iframe src="https://magnetminer.github.io/Tridente/"></iframe>
            </div>
        </div>

        <div class="quadrant">
            <div class="q-title">Z-Engine Kernal</div>
            <div style="padding:15px; font-size:0.7rem;">
                <p>DOI: 10.5281/zenodo.18305369</p>
                <p>L-SUSY Phase: 100%</p>
                <div style="height:10px; background:#111; border:1px solid var(--grid);">
                    <div style="width:98%; background:var(--green); height:100%;"></div>
                </div>
            </div>
        </div>

        <div class="quadrant">
            <div class="q-title">Mission Logs</div>
            <div id="log-display"></div>
        </div>
    </main>

    <footer>
        <button id="bypass-btn" class="bypass-btn" onclick="toggleBypass()">Bypass Engine</button>
        <button id="ap-btn" onclick="toggleAP()">Z-Aegis Auto Pilot</button>
        <div style="font-size:0.6rem; color:#444;">SECURITY: TOP SECRET // 2026</div>
    </footer>

    <script>
        let bypass = false, ap = false;
        let tX = 60, tY = 40;

        // Geoloc
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(p => {
                const la = p.coords.latitude.toFixed(4), lo = p.coords.longitude.toFixed(4);
                document.querySelectorAll('.coord').forEach(el => {
                    if(el.id.includes('lat')) el.innerText = `LAT: ${la} N`;
                    else el.innerText = `LON: ${lo} W`;
                });
            });
        }

        function updateClock() { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }
        setInterval(updateClock, 1000);

        function log(t) {
            const d = document.getElementById('log-display');
            const e = document.createElement('div');
            e.innerText = `[${new Date().toLocaleTimeString()}] > ${t}`;
            d.appendChild(e); d.scrollTop = d.scrollHeight;
        }

        function toggleBypass() {
            bypass = !bypass;
            document.getElementById('bypass-btn').classList.toggle('active-btn');
            log(bypass ? "BYPASS ACTIVE - DATA NOISE UNFILTERED" : "ENGINE ONLINE - NOISE SUPPRESSED");
        }

        function toggleAP() {
            ap = !ap;
            document.getElementById('ap-btn').classList.toggle('active-btn');
            document.getElementById('laser').style.display = ap ? 'block' : 'none';
            document.getElementById('sys-status').innerText = ap ? "AUTO-PILOT ENGAGED" : "STANDBY";
            if(ap) loop();
        }

        function loop() {
            if(!ap) return;
            const target = document.getElementById('target'), laser = document.getElementById('laser'), map = document.getElementById('tsd-map');
            tX += (Math.random()-0.5)*2; tY += (Math.random()-0.5)*2;
            target.style.left = `${tX}%`; target.style.top = `${tY}%`;
            
            const mH = map.offsetHeight, mW = map.offsetWidth;
            const tPX = (tX/100)*mW, tPY = (tY/100)*mH;
            const dist = Math.sqrt(tPX*tPX + (mH-tPY)*(mH-tPY));
            const angle = Math.atan2(tPY - mH, tPX) * 180 / Math.PI;

            laser.style.width = `${dist}px`;
            laser.style.top = `${mH}px`; laser.style.left = `0px`;
            laser.style.transform = `rotate(${angle + (bypass ? (Math.random()-0.5)*15 : 0)}deg)`;
            setTimeout(loop, 100);
        }

        log("SYSTEM INITIALIZED...");
        log("Z-ENGINE READY FOR MISSION.");
    </script>
</body>
</html>
